(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();class U extends Phaser.Scene{constructor(){super("MainMenuScene"),this.gridOffsetY=0,this.scrollSpeed=1.3,this.signClient=null,this.session=null,this.walletConnectModal=null}preload(){if(!this.textures.exists("gradient")){const t=a.height,i=this.textures.createCanvas("gradient",a.width,t),o=i.getContext(),s=o.createLinearGradient(0,0,0,t);s.addColorStop(0,"#2A2D3F"),s.addColorStop(.5,"#1B1D2A"),s.addColorStop(1,"#2A2D3F"),o.fillStyle=s,o.fillRect(0,0,a.width,t),i.refresh()}this.load.image("name","assets/images/name.png"),this.load.image("title2","assets/images/title2.png"),this.load.image("startButton","assets/images/STARTBUTTON.png"),this.load.image("connectButton","assets/images/CONNECTBUTTON.png"),this.load.image("bird","assets/images/bird.png"),this.load.image("logobird","assets/images/logobird.png")}async create(){this.logText=this.add.text(20,a.height-100,"",{fontSize:"14px",color:"#FFFFFF",wordWrap:{width:a.width-40}}).setOrigin(0).setDepth(10),this.add.image(0,0,"gradient").setOrigin(0),this.gridGraphics=this.add.graphics(),this.gameTitle=this.add.image(a.width/2,a.height/4,"name").setOrigin(.5),this.subtitle=this.add.image(a.width/2,a.height/3,"title2").setOrigin(.5),this.add.image(a.width/2,a.height/2,"logobird").setOrigin(.5),this.add.image(a.width/2,a.height*7/10,"startButton").setOrigin(.5).setInteractive().on("pointerdown",()=>{x=1,this.registry.set("playerLives",1),this.scene.start("LevelIntroScene")})}update(){this.updateGrid()}updateGrid(){this.gridGraphics.clear(),this.gridOffsetY=(this.gridOffsetY+this.scrollSpeed)%40;for(let t=0;t<=a.width;t+=60)this.gridGraphics.lineStyle(2,Phaser.Display.Color.HexStringToColor("#2A2D3F").color,1),this.gridGraphics.lineBetween(t,-40+this.gridOffsetY,t,a.height+40+this.gridOffsetY);for(let t=-40;t<=a.height+40;t+=40)this.gridGraphics.lineStyle(2,Phaser.Display.Color.HexStringToColor("#2A2D3F").color,1),this.gridGraphics.lineBetween(-60,t+this.gridOffsetY,a.width+60,t+this.gridOffsetY)}startTitleFlicker(){this.scheduleNextFlicker()}scheduleNextFlicker(){const t=Phaser.Math.Between(5e3,1e4);this.time.delayedCall(t,()=>{this.flickerTitle(),this.scheduleNextFlicker()})}flickerTitle(){const t=Phaser.Math.Between(3,5);this.tweens.add({targets:this.gameTitle,alpha:0,duration:50,yoyo:!0,repeat:t-1})}}class K extends Phaser.Scene{constructor(){super("LevelIntroScene")}preload(){this.load.image("heart","assets/images/heart.png")}create(){this.cameras.main.setBackgroundColor("#000000"),this.add.text(a.width/2,a.height/2,`LEVEL ${x}`,{fontSize:"30px",fontFamily:"Orbitron, sans-serif",color:"#00FFFF",shadow:{offsetX:0,offsetY:0,color:"#0099CC",blur:15,stroke:!0,fill:!0}}).setOrigin(.5);let t=this.registry.get("playerLives")||1;this.add.image(a.width/2-20,a.height/2+60,"heart").setScale(.9).setOrigin(.5),this.add.text(a.width/2+10,a.height/2+60,`   x ${t}`,{fontSize:"20px",fontFamily:"Verdana",color:"#FFFFFF"}).setOrigin(.5),this.time.delayedCall(1200,()=>{this.scene.start("GameScene")})}}class j extends Phaser.Scene{constructor(){super("GameScene")}preload(){J.call(this)}create(){te.call(this)}update(){ge.call(this)}}const a={type:Phaser.AUTO,width:360,height:640,physics:{default:"arcade",arcade:{gravity:{y:500},debug:!1,checkCollision:{up:!0,down:!0,left:!0,right:!0}}},scene:[U,K,j]};new Phaser.Game(a);const A=9;let P=A,S=0,I=60,$=60;const G=50;let q=-200,m=0,w=!1,L=!0,c,f,b,C,g,B=0,n,F=!1;const V=4;let u=V;const W=5;let x=1,p=0,M=24,v;const Y=5;function J(){this.load.image("trail","assets/images/bird_track.png"),this.load.image("bird","assets/images/bird.png"),this.load.image("barrier","assets/images/barrier1.png"),this.load.image("modifier1","assets/images/modifier1.png"),this.load.image("modifier2","assets/images/modifier2.png"),this.load.image("coin","assets/images/coin.png"),this.load.image("nest","assets/images/nest.png"),this.load.image("nestArrow","assets/images/nest_arrow.png"),this.load.image("PlayAgainButton","assets/images/PlayAgainButton.png"),this.load.image("NextLevelButton","assets/images/NextLevelButton.png"),this.load.image("GameOverText","assets/images/gameover.png"),this.load.image("levelComplete","assets/images/levelcomplete.png"),this.load.image("retry","assets/images/tryagain.png"),this.load.image("RetryButton","assets/images/RetryButton.png"),this.load.image("gratzwindow","assets/images/gratzwindow.png"),this.load.image("heart","assets/images/heart.png"),this.load.image("spinbarrier","assets/images/spinbarrier1.png"),this.load.image("widebarrier","assets/images/widebarrier.png"),this.load.image("slantedwidebarrier","assets/images/slantedwidebarrier.png");for(let e=1;e<=Y;e++)this.load.json(`level${e}`,`data/level${e}.json`)}function Q(e){let t=e.registry.get("playerLives")||1;e.lifeIcon=e.add.sprite(0,0,"heart"),e.lifeIcon.setDisplaySize(32,32),e.lifeIcon.setDepth(1);const i={fontSize:"16px",fontFamily:"Verdana",color:"#FFFFFF"};e.lifeText=e.add.text(0,0,`${t}`,i).setOrigin(.5),e.lifeText.setDepth(1),e.lifeBox=e.add.graphics(),e.lifeBox.setDepth(0),O(e)}function Z(e,t){const i=e.physics.add.sprite(t.x,t.y,"widebarrier");i.setOrigin(.5),i.body.setImmovable(!0),i.body.setAllowGravity(!1),f.add(i)}function ee(e,t){const i=e.physics.add.sprite(t.x,t.y,"slantedwidebarrier");switch(i.setOrigin(.5),i.body.setImmovable(!0),i.body.setAllowGravity(!1),t.direction){case"top_falling":i.setFlipY(!0);break;case"bottom_falling":i.setFlipX(!0);break;case"top_rising":i.setFlipX(!0),i.setFlipY(!0);break}f.add(i)}function te(){w=!1,F=!1,L=!0,m=0,S=0,u=V,C=this.add.group(),Te(),xe(this);let e=this.registry.get("playerLives")||1;console.log(`üü¢ create(): –ù–∞—á–∏–Ω–∞–µ–º —É—Ä–æ–≤–µ–Ω—å ${x}`),console.log(`   ‚û§ –ó–∞–≥—Ä—É–∂–µ–Ω—ã playerLives = ${e}`),e<=0&&console.error("‚ùå –û—à–∏–±–∫–∞! playerLives <= 0 –≤ create(). –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ö–æ—Ç—è –±—ã 1!"),f=this.physics.add.group({immovable:!0,allowGravity:!1}),b=this.physics.add.group({immovable:!0,allowGravity:!1}),v=this.physics.add.group({immovable:!0,allowGravity:!1});const t=this.cache.json.get(`level${x}`);t.obstacles.forEach(l=>z(this,l)),Array.isArray(t.spinobstacles)?t.spinobstacles.forEach(l=>ie(this,l)):console.warn(`–í–Ω–∏–º–∞–Ω–∏–µ: –≤ level${x}.json –Ω–µ—Ç spinobstacles.`),Array.isArray(t.wideobstacles)&&t.wideobstacles.forEach(l=>Z(this,l)),Array.isArray(t.obstacles)&&t.obstacles.forEach(l=>z(this,l)),Array.isArray(t.slantedwideobstacles)&&t.slantedwideobstacles.forEach(l=>ee(this,l)),t.coins.forEach(l=>Ce(this,l)),t.modifiers.forEach(l=>le(this,l)),c=this.physics.add.group({runChildUpdate:!0}),R(this,G,a.height/2),be(this,t.nest),this.physics.add.overlap(c,v,Se,null,this),this.physics.add.overlap(c,b,ne,null,this),this.physics.add.collider(c,f,(l,y)=>{re(this,l,y)}),p=this.registry.get("coinCount")||0,oe(this),Q(this),O(this),this.gameOverText=this.add.image(a.width/2,a.height/2-50,"GameOverText").setOrigin(.5).setVisible(!1),this.levelCompleteText=this.add.sprite(a.width/2,a.height/2-100,"levelComplete").setOrigin(.5).setVisible(!1).setScale(1,1.2),this.tryAgainWindow=this.add.image(a.width/2,a.height/2-40,"retry").setOrigin(.5).setVisible(!1),this.gratzWindow=this.add.image(a.width/2,a.height/2-50,"gratzwindow").setOrigin(.5).setVisible(!1),this.playAgainButton=this.add.image(a.width/2,a.height/2+180,"PlayAgainButton").setOrigin(.5).setInteractive().setVisible(!1),this.playAgainButton.on("pointerdown",()=>{console.log("üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã..."),X(this)}),this.levelCompleteStats=this.add.container(a.width/2,a.height/2-50);const i=this.add.image(-70,0,"coin").setScale(.75),o=this.add.text(-50,0,`x ${p}`,{fontSize:"20px",fontFamily:"Verdana",color:"#FFFFFF"}).setOrigin(0,.5),s=this.add.image(30,0,"heart").setScale(.75),r=this.add.text(50,0,`x ${m}`,{fontSize:"20px",fontFamily:"Verdana",color:"#FFFFFF"}).setOrigin(0,.5);this.levelCompleteStats.add([i,o,s,r]),this.levelCompleteStats.setVisible(!1),this.tryAgainStats=this.add.container(a.width/2,a.height/2+10);const d=this.add.image(-20,0,"heart").setScale(.75),h=this.add.text(0,0,"x 1",{fontSize:"20px",fontFamily:"Verdana",color:"#FFFFFF"}).setOrigin(0,.5);this.tryAgainStats.add([d,h]),this.tryAgainStats.setVisible(!1),this.nextLevelButton=this.add.image(a.width/2,a.height/2+180,"NextLevelButton").setOrigin(.5).setInteractive().setVisible(!1),this.retryButton=this.add.image(a.width/2,a.height/2+180,"RetryButton").setOrigin(.5).setInteractive().setVisible(!1).on("pointerdown",()=>{console.log("üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è..."),de(this)}),this.nextLevelButton.on("pointerdown",()=>{console.log("üîº –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å:",x+1),c&&c.clear(!0,!0),f&&f.clear(!0,!0),v&&v.clear(!0,!0),b&&b.clear(!0,!0),m=0,S=0,u=V,P=A,x++,this.scene.start("LevelIntroScene")}),this.playAgainButton=this.add.image(a.width/2,a.height/2+220,"PlayAgainButton").setOrigin(.5).setInteractive().setVisible(!1),this.playAgainButton.on("pointerdown",()=>{if(console.log("üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã..."),x=1,p=0,e=1,u=V,P=A,S=0,this.registry.set("coinCount",0),this.registry.set("playerLives",1),this.levelCompleteStats){const[,l,,y]=this.levelCompleteStats.list;l.setText(`x ${p}`),y.setText(`x ${m}`),this.levelCompleteStats.setVisible(!1)}this.gameOverText.setVisible(!1),this.levelCompleteText.setVisible(!1),this.playAgainButton.setVisible(!1),X(this)}),this.add.group(),this.input.on("pointerdown",()=>{w||c.children.each(l=>{!l||!l.scene||(l.body.setVelocityY(q),se(this,l.x,l.y,l))})}),this.physics.world.on("worldbounds",(l,y,T,k,Be)=>{if(!l.gameObject)return;const E=l.gameObject;c.remove(E,!0),E.destroy()})}function ie(e,t){console.log(`–°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–∞—â–∞—é—â–µ–π—Å—è –ø–∞–ª–∫–∏: x=${t.x}, y=${t.y}, speed=${t.speed}, direction=${t.direction}`);const i=e.physics.add.sprite(t.x,t.y,"spinbarrier");i.setOrigin(.5,.5),i.body.setImmovable(!0),i.body.setAllowGravity(!1),i.body.setSize(2,2),i.body.setOffset(i.width/2-1,i.height/2-1);const o=5,s=[],r=i.displayHeight/32;for(let h=0;h<o;h++){const l=e.physics.add.sprite(t.x,t.y,null);l.body.setImmovable(!0),l.body.setAllowGravity(!1),l.body.setSize(r,r),l.setAlpha(0),s.push(l)}f.add(i),f.addMultiple(s);const d=t.direction==="counterclockwise"?-1:1;e.tweens.killTweensOf(i),e.tweens.add({targets:i,angle:360*d,duration:t.speed?2e3/t.speed:2e3,repeat:-1,ease:"Linear",onUpdate:()=>{N(i,s)}}),i.update=function(){this.x-=u,N(this,s),this.x<-this.displayWidth/2&&(console.log(`–¶–µ–Ω—Ç—Ä –ø–∞–ª–∫–∏ –≤—ã—à–µ–ª –∑–∞ —ç–∫—Ä–∞–Ω, —É–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–ª–ª–∞–π–¥–µ—Ä—ã x=${this.x}`),s.forEach(h=>{h.body.enable=!1,f.remove(h,!0,!0)}),s.length=0)}}function N(e,t){if(!e||!t||t.length===0)return;const i=Phaser.Math.DegToRad(e.angle),s=e.displayHeight/2/2.5;if(e.x<-e.displayWidth/2){console.log(`–ü–∞–ª–∫–∞ –≤—ã—à–ª–∞ –∑–∞ —ç–∫—Ä–∞–Ω, —É–¥–∞–ª—è–µ–º –∫–æ–ª–ª–∞–π–¥–µ—Ä—ã! x=${e.x}`),t.forEach(r=>{r&&r.body&&(r.body.enable=!1,r.setVisible(!1),f.remove(r,!0,!0))}),t.length=0;return}t[0]&&t[0].setPosition(e.x,e.y);for(let r=1;r<=2;r++)if(t[r]&&t[r+2]){const d=s*r*Math.sin(i),h=s*r*Math.cos(i);t[r].setPosition(e.x+d,e.y-h),t[r+2].setPosition(e.x-d,e.y+h)}}function se(e,t,i,o){const s=o.displayWidth*2/o.width,r=e.add.sprite(t-28*s,i+18*s,"trail");r.setScale(s,s),r.setAlpha(1),r.setOrigin(.5),C.add(r),e.tweens.add({targets:r,alpha:0,duration:520,onComplete:()=>{r.destroy(),C.remove(r)}})}function oe(e){e.coinIcon=e.add.sprite(0,0,"coin"),e.coinIcon.setDisplaySize(M,M),e.coinIcon.setDepth(1);const t={fontSize:"16px",fontFamily:"Verdana",color:"#FFFFFF"};e.coinText=e.add.text(0,0,`${p}`,t).setOrigin(.5),e.coinText.setDepth(1),e.coinBox=e.add.graphics(),e.coinBox.setDepth(0),e.coinTextLength=`${p}`.length,_(e)}function R(e,t,i){const o=e.physics.add.sprite(t,i,"bird");o.setDisplaySize(I,$),o.setCollideWorldBounds(!0),o.body.onWorldBounds=!0,o.id=Phaser.Math.RND.uuid(),c.add(o)}function ae(e,t){const o=I/2,s=c.getChildren()[0];s&&s.x;const r=s?s.y:a.height/2;c.children.iterate(h=>{h.body&&(h.x+=o,h.body.updateFromGameObject())});let d=-1;for(let h=0;h<t;h++){const l=r+d*Math.ceil(h/2)*($+1),y=R(e,G,l);y!=null&&y.body&&y.body.setVelocityY(baseVelocityY),d*=-1}}function re(e,t,i){if(!t||!i){console.error("Player or obstacle is undefined");return}w||(H(e,t.x,t.y,"0xFFB6DA"),t.body.setVelocityY(300),t.body.setGravityY(800),t.body.moves=!1,c.remove(t,!0,!0),c.getChildren().length===0&&pe(e))}function le(e,t){let i;switch(t.effect){case"duplicate":case"enlarge":i="modifier1";break;case"speed":i="modifier2";break;default:i="modifier1"}const o=e.physics.add.sprite(t.x,t.y,i);o.effect=t.effect,o.value=t.value,o.body.setImmovable(!0),o.body.setAllowGravity(!1);let s="";switch(o.effect){case"duplicate":s="+";break;case"enlarge":s="x";break;case"speed":s="s";break;default:s="?"}const r=`${s}${o.value}`;o.displayText=e.add.text(0,0,r,{fontSize:"16px",fontFamily:"Verdana",color:"#FFFFFF",align:"center"}),o.displayText.setOrigin(.5,.5),o.displayText.setPosition(o.x,o.y),b.add(o),o.displayText.setDepth(1)}function ne(e,t){switch(t.effect){case"duplicate":ae(this,t.value);break;case"enlarge":e.setDisplaySize(I*t.value,$*t.value);break;case"speed":u*=t.value;break;default:console.warn("Unknown modifier effect:",t.effect)}t.displayText&&t.displayText.destroy(),b.remove(t,!0,!0)}function de(e){e.tryAgainWindow.setVisible(!1),e.retryButton.setVisible(!1),e.scene.start("LevelIntroScene")}function X(e){console.log("üîÑ –ü–æ–ª–Ω—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã..."),e.registry.set("playerLives",1),e.registry.set("coinCount",0),x=1,e.gameOverText.setVisible(!1),e.playAgainButton.setVisible(!1),e.tryAgainWindow.setVisible(!1),e.retryButton.setVisible(!1),e.scene.start("MainMenuScene")}function he(e){if(F)return;let t=e.registry.get("playerLives")||1;if(console.log("üü° checkLevelEnd(): –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è..."),console.log(`   ‚û§ birdsCome = ${m}, playerLives = ${t}`),m>0){console.log("‚úÖ –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!");let i=t+m;if(console.log(`   ‚û§ –ë—ã–ª–æ –∂–∏–∑–Ω–µ–π: ${t}, –ø—Ç–∏—Ü –¥–æ–ª–µ—Ç–µ–ª–æ: ${m}, —Ç–µ–ø–µ—Ä—å –∂–∏–∑–Ω–µ–π: ${i}`),e.registry.set("playerLives",i),F=!0,O(e),x>=Y)e.gratzWindow.setVisible(!0),e.playAgainButton.setVisible(!0),console.log("üéâ –ò–≥—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–∏–ª –¥–µ–º–æ-–≤–µ—Ä—Å–∏—é!");else if(e.levelCompleteText.setVisible(!0),e.nextLevelButton.setVisible(!0),e.levelCompleteStats){const[,o,,s]=e.levelCompleteStats.list;o.setText(`x ${p}`),s.setText(`x ${m}`),e.levelCompleteStats.setVisible(!0)}return}if(t>1){console.log(`üü† –ò–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª, –Ω–æ —É –Ω–µ–≥–æ –µ—â–µ ${t-1} –∂–∏–∑–Ω–µ–π.`),t--,e.registry.set("playerLives",t),console.log(`   ‚û§ –ü–æ—Å–ª–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è –∂–∏–∑–Ω–µ–π: ${t}`),e.tryAgainWindow.setVisible(!0),e.retryButton.setVisible(!0),O(e);return}console.log("üî¥ –ò–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª –∏ —É –Ω–µ–≥–æ –Ω–µ—Ç –∂–∏–∑–Ω–µ–π - Game Over!"),e.registry.set("playerLives",1),e.gameOverText.setVisible(!0),e.playAgainButton.setVisible(!0)}function ce(e,t){(t.y>a.height||t.y<0||t.x>a.width||t.x<0)&&(H(e,t.x,t.y),c.remove(t,!0),t.destroy())}function ge(){if(!(w||F)){if(c.children.each(e=>ce(this,e)),c.getChildren().length===0){he(this);return}L?(C.children.each(e=>{e.x-=u/2,e.x+e.width/2<0&&C.remove(e,!0,!0)}),n&&n.x<=a.width*.75&&(ue(),n.body&&n.body.setVelocityX(0),c.children.each(e=>{e.body&&e.body.setVelocityX(u*60)})),me(),Fe(),n&&n.x>a.width*.75&&fe()):ye(),D(),Oe()}}function fe(){if(n){if(n.x<=a.width*.75){n.body&&n.body.setVelocityX(0);return}n.body?n.body.setVelocityX(-u*60):n.x-=u}}function ue(){L=!1}function ye(){if(!n){console.error("Nest is not defined");return}}function pe(e){if(w)return;let t=e.registry.get("playerLives")||1;if(t--,e.registry.set("playerLives",t),console.log("üî¥ handleGameOver - –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"),console.log(`   ‚û§ –û—Å—Ç–∞–ª–æ—Å—å –∂–∏–∑–Ω–µ–π: ${t}`),w=!0,L=!1,u=0,f.getChildren().forEach(i=>{var o;return(o=i.body)==null?void 0:o.setVelocityX(0)}),b.getChildren().forEach(i=>{var o;return(o=i.body)==null?void 0:o.setVelocityX(0)}),v.getChildren().forEach(i=>{var o;return(o=i.body)==null?void 0:o.setVelocityX(0)}),n!=null&&n.body&&n.body.setVelocityX(0),t>0){console.log(`üü° –ò–≥—Ä–æ–∫ –ø–æ—Ç–µ—Ä—è–ª –∂–∏–∑–Ω—å, –Ω–æ –µ—â–µ –Ω–µ –ø—Ä–æ–∏–≥—Ä–∞–ª! –û—Å—Ç–∞–ª–æ—Å—å: ${t}`);const[,i]=e.tryAgainStats.list;i.setText(`x ${t}`),e.tryAgainWindow.setVisible(!0),e.retryButton.setVisible(!0),e.tryAgainStats.setVisible(!0),O(e)}else console.log("üíÄ –ò–≥—Ä–æ–∫ –ø—Ä–æ–∏–≥—Ä–∞–ª - –Ω–∞—Å—Ç–æ—è—â–∞—è —Å–º–µ—Ä—Ç—å!"),e.gameOverText.setVisible(!0),e.playAgainButton.setVisible(!0)}function xe(e){const t="gradient";if(!e.textures.exists(t)){const i=a.height,o=e.textures.createCanvas(t,a.width,i),s=o.getContext(),r=s.createLinearGradient(0,0,0,i);r.addColorStop(0,"#2A2D3F"),r.addColorStop(1,"#1B1D2A"),s.fillStyle=r,s.fillRect(0,0,a.width,i),o.refresh()}e.add.image(0,0,t).setOrigin(0,0),g=e.add.graphics(),g.lineStyle(2,Phaser.Display.Color.HexStringToColor("#2A2D3F").color,.5);for(let i=0;i<=a.width;i+=60)g.beginPath(),g.moveTo(i,0),g.lineTo(i,a.height),g.closePath(),g.strokePath();for(let i=0;i<=a.height;i+=40)g.beginPath(),g.moveTo(0,i),g.lineTo(a.width,i),g.closePath(),g.strokePath()}function me(){if(!(w||F)){g.clear(),g.lineStyle(2,Phaser.Display.Color.HexStringToColor("#2A2D3F").color,.5),B=(B-u)%60;for(let e=B;e<=a.width;e+=60)g.lineBetween(e,0,e,a.height);for(let e=0;e<=a.height;e+=40)g.lineBetween(0,e,a.width,e)}}function be(e,t){n=e.physics.add.sprite(t.x,t.y,"nest"),n.body.setImmovable(!0),n.body.setAllowGravity(!1),n.fillGraphics=e.add.graphics(),n.fillGraphics.setDepth(1);const i=n.displayWidth,o=n.displayHeight,s=i*.8,r=o*.8;n.body.setSize(s,r),n.body.setOffset((i-s)/2,(o-r)/2),n.fillGraphics=e.add.graphics(),n.fillGraphics.setDepth(1);const d=-100,h=e.add.sprite(t.x,t.y+d,"nestArrow");e.events.on("update",()=>{h.setPosition(n.x,n.y+d)}),e.physics.add.collider(c,n,we,null,e)}function D(){if(!n||!n.fillGraphics)return;const e=-26,t=-24,o=14/2,s=16,r=20,d=3;n.fillGraphics.clear(),n.fillGraphics.fillStyle(61695,1);for(let h=0;h<S;h++){const l=Math.floor(h/d),y=h%d,T=n.x+e+l*r+o,k=n.y+t+y*s+o;n.fillGraphics.fillCircle(T,k,o)}}function ve(e,t,i,o=61695){const s=e.add.graphics();s.setPosition(t,i),s.setDepth(10),s.fillStyle(o,1),s.fillCircle(0,0,10),e.tweens.add({targets:s,scaleX:3,scaleY:3,alpha:0,duration:300,ease:"Cubic.easeOut",onComplete:()=>{s.destroy()}})}function H(e,t,i,o=61695,s=15){for(let r=0;r<s;r++){const d=e.add.graphics();d.setPosition(t,i),d.setDepth(10),d.fillStyle(o,1),d.fillCircle(0,0,10);const h=Phaser.Math.FloatBetween(0,2*Math.PI),l=Phaser.Math.Between(50,100),y=t+Math.cos(h)*l,T=i+Math.sin(h)*l;e.tweens.add({targets:d,x:y,y:T,alpha:0,scaleX:.5,scaleY:.5,duration:500,ease:"Cubic.easeOut",onComplete:()=>{d.destroy()}})}}function we(e,t){const i=e.type==="Rectangle"&&c.contains(e)?e:t,o=e===i?t:e;if(!i||!o||!i.body||!o.body){console.warn("Invalid collision detected.");return}if(!c.getChildren().includes(i)){console.warn("Player not found in group. Skipping removal.");return}ve(i.scene,i.x,i.y),S<P?(m++,S++,D()):console.log("Nest is full. No more birds can be added."),c.remove(i,!0),i.destroy()}function _(e){if(!e.coinBox||!e.coinText||!e.coinIcon)return;const t=10,i=5,o=t*2+e.coinIcon.displayWidth+i+e.coinText.width,s=40;e.coinBox.clear(),e.coinBox.fillStyle(0,.7),e.coinBox.fillRoundedRect(90,10,o,s,10);const r=90+o/2,d=10+s/2;e.coinIcon.setPosition(r-(e.coinText.width/2+i/2),d),e.coinText.setPosition(r+(e.coinIcon.displayWidth/2+i/2),d)}function O(e){if(!e.lifeBox||!e.lifeText||!e.lifeIcon)return;const t=10,i=5,o=t*2+e.lifeIcon.displayWidth+i+e.lifeText.width,s=40;e.lifeBox.clear(),e.lifeBox.fillStyle(0,.7),e.lifeBox.fillRoundedRect(10,10,o,s,10);const r=10+o/2,d=10+s/2;e.lifeIcon.setPosition(r-(e.lifeText.width/2+i/2),d),e.lifeText.setPosition(r+(e.lifeIcon.displayWidth/2+i/2),d)}function Se(e,t){t.body&&t.body.destroy(),v.remove(t,!0,!0),p+=1,this.registry.set("coinCount",p),this.registry.set("coinCount",p),this.coinText&&(this.coinText.setText(`${p}`),_(this))}function Ce(e,t){const i=e.physics.add.sprite(t.x,t.y,"coin");i.body.setImmovable(!0),i.body.setAllowGravity(!1),v.add(i)}function z(e,t){const i=e.physics.add.sprite(t.x,t.y,"barrier");i.body.setImmovable(!0),i.body.setAllowGravity(!1),f.add(i)}function Fe(){w||(f.getChildren().forEach(e=>{e.body&&e.body.setVelocityX(-u*60),e.graphics&&(e.graphics.x=e.x,e.graphics.y=e.y),e.x+e.displayWidth/2<0&&(e.graphics&&e.graphics.destroy(),f.remove(e,!0,!0))}),v.getChildren().forEach(e=>{e.body&&e.body.setVelocityX(-u*60),e.x<-20&&v.remove(e,!0,!0)}),b.getChildren().forEach(e=>{e.body&&e.body.setVelocityX(-u*60),e.displayText&&(e.displayText.x=e.x,e.displayText.y=e.y),e.x+e.displayWidth/2<0&&(e.text&&e.text.destroy(),b.remove(e,!0,!0))}))}function Oe(){c&&c.children.each(e=>{e.body&&(e.body.velocity.y<0?e.angle=Phaser.Math.Clamp(e.angle-W,-30,30):e.body.velocity.y>0&&(e.angle=Phaser.Math.Clamp(e.angle+W,-30,30)))})}function Te(){B=0}
